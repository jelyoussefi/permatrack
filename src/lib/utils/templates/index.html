<html>

    <head>
        <style>
            body {
            }
            img { 
                display:block;
                margin-left: auto;
                margin-right:auto;
                border: 3px solid red;
                box-shadow: 3px 3px 3px #bbb;
              } 
            h1 {
                padding-top:40px;
                font-size: 36px;
            }

        </style>
        <title>Pedestrian Tracking</title>
    </head>

    <body>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <h1 align="center">Pedestrian Tracking </h1>
        <img align="center" src="{{ url_for('video_feed') }}" >
    </body>


    <script> 
    
        $(document).ready(function() {

            send_command = function(data) {
                $.ajax({
                    url: '/handle_command',
                    type: 'POST',
                    data: JSON.stringify(data),
                    contentType: 'application/json;charset=UTF-8',
                    cache:false,
                    error: function(response){
                        alert('Error sending data')
                    }
                });
            }

            $("img").on("click", function(event) {
                bounds=this.getBoundingClientRect();
                var left=bounds.left;
                var top=bounds.top;
                var x = event.pageX - left;
                var y = event.pageY - top;
                var cw=this.clientWidth
                var ch=this.clientHeight
                var iw=this.naturalWidth
                var ih=this.naturalHeight
                var px=x/cw*iw
                var py=y/ch*ih
                send_command(
                                {
                                    'type'  : 'click_position',
                                    'x'     : px,
                                    'y'     : py
                                }
                            )
            });
        });
    
    </script> 
 

</html>
